<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft&reg; HTML Help Workshop 4.1">
<Title>2.4.8</Title>
</HEAD>
<BODY>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 14.45pt">从<SPAN lang=EN-US>CoreUI继承下来。具有快速定位、通用过滤等基本功能。</SPAN></P>
<H4 style="MARGIN: 14pt 0cm 14.5pt"><SPAN style="FONT-FAMILY: 黑体; mso-ascii-font-family: Arial">类方法介绍</SPAN></H4>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm">普通序时簿类<SPAN lang=EN-US>UI从com.kingdee.eas.framework.client.ListUI继承。通过BOS Studio完成UI对象的创建、更改继承Query对象的类型以及KDTable控件绑定等。</SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm"><SPAN lang=EN-US>&nbsp;<?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /><o:p></o:p></SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm">必须重载的方法：</P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l5 level1 lfo6; tab-stops: list 42.0pt"><SPAN lang=EN-US>1.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; COLOR: #7f0055; mso-font-kerning: 0pt; mso-highlight: white">protected</SPAN></B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white"> <B><SPAN style="COLOR: #7f0055">abstract</SPAN></B> <SPAN style="COLOR: black">String</SPAN> <SPAN style="COLOR: black">getEditUIName()</SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; mso-font-kerning: 0pt">：</SPAN><SPAN style="FONT-SIZE: 10pt; mso-font-kerning: 0pt">指示<SPAN style="BACKGROUND: white; mso-highlight: white">关联的编辑<SPAN lang=EN-US>UI对象名</SPAN></SPAN></SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #e0e0e0; MARGIN: 1pt 0cm 1pt 21pt; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN style="FONT-SIZE: 10pt; mso-font-kerning: 0pt">示例：<SPAN lang=EN-US><BR>protected String getEditUIName()<BR>{<BR><SPAN style="mso-spacerun: yes">&nbsp;&nbsp; </SPAN>return “com.kingdee.eas.basedata.assistant.client.CurrencyEditUI”;<BR>}</SPAN></SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l3 level1 lfo1; tab-stops: list 42.0pt"><SPAN lang=EN-US>1.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; COLOR: #7f0055; mso-font-kerning: 0pt; mso-highlight: white">protected</SPAN></B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white"> <B><SPAN style="COLOR: #7f0055">abstract</SPAN></B> <SPAN style="COLOR: black">IObjectBase</SPAN> <SPAN style="COLOR: black">getBizInterface()</SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; mso-font-kerning: 0pt">：</SPAN><SPAN style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white">获取列表对应实体的业务接口，以便调用业务</SPAN><SPAN style="FONT-SIZE: 10pt; mso-font-kerning: 0pt">方法。要求实体必须从<SPAN lang=EN-US>ObjectBase及其子类派生。</SPAN></SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #e0e0e0; MARGIN: 1pt 0cm 1pt 21pt; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN style="FONT-SIZE: 10pt; mso-font-kerning: 0pt">示例：<SPAN lang=EN-US><BR>protected IObjectBase getBizInterface()<BR>{<BR><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>return CurrencyFactory.getRemoteInstance();<BR>}</SPAN></SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm"><SPAN lang=EN-US>3.<SPAN style="mso-spacerun: yes">&nbsp; </SPAN><B><SPAN style="COLOR: maroon">protected</SPAN></B> String[] getLocateNames()返回可定位的列名数组。</SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm">默认实现。</P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>//业务系统可重载实现下面方法，返回合适的字符串数组（表格列名），来达到定位的目的。</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>protected String[] getLocateNames()</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>{</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>String[] locateNames = new String[2];</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>locateNames[0] = IFWEntityStruct.dataBase_Number;</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>locateNames[1] = IFWEntityStruct.dataBase_Name;</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>return locateNames;</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>}</SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>4.<B><SPAN style="COLOR: maroon">protected</SPAN></B> FilterInfo getDefaultFilterForQuery()</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>//默认进行当前CU的过滤。子类可重载。</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>protected FilterInfo getDefaultFilterForQuery()</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>{</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>FilterInfo filter = new FilterInfo();</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>filter.getFilterItems().add(new FilterItemInfo("CU",SysContext.getSysContext().getCurrentCU(),CompareType.EQUALS));</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>return filter;</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #d9d9d9; MARGIN: 1pt 0cm; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>}</SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US>&nbsp;<o:p></o:p></SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm">可选的方法：</P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l1 level1 lfo4; tab-stops: list 42.0pt"><SPAN lang=EN-US>1.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; COLOR: #7f0055; mso-font-kerning: 0pt; mso-highlight: white">protected</SPAN></B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white"> <B><SPAN style="COLOR: #7f0055">void</SPAN></B> <SPAN style="COLOR: black">prepareUIContext(UIContext</SPAN> <SPAN style="COLOR: black">uiContext, java.awt.event.ActionEvent</SPAN> <SPAN style="COLOR: black">e)</SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; mso-font-kerning: 0pt">：</SPAN><SPAN style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white">允许构造传递给<SPAN lang=EN-US>EditUI的UIContext</SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; mso-font-kerning: 0pt">。利用这个方法，你可以加入需要的任何对象并传递给<SPAN lang=EN-US>EditUI。</SPAN></SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #e0e0e0; MARGIN: 1pt 0cm 1pt 21pt; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN style="FONT-SIZE: 10pt; mso-font-kerning: 0pt">示例：<SPAN lang=EN-US><BR>protected void prepareUIContext(UIContext uiContext, java.awt.event.ActionEvent e)<BR>{<BR><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>// 检查是否按下新建按钮<BR><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>if (e.getSource() == btnAddNew)<BR><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>uiContext.put(“myObject”, null);<BR><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>else<BR><SPAN style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </SPAN>uiContext.pub(“myObject”, getMyObject());<BR>}</SPAN></SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l1 level1 lfo4; tab-stops: list 42.0pt"><SPAN lang=EN-US>2.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; COLOR: #7f0055; mso-font-kerning: 0pt; mso-highlight: white">protected</SPAN></B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white"> <SPAN style="COLOR: black">String</SPAN> <SPAN style="COLOR: black">getEditUIModal()</SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; mso-font-kerning: 0pt">：</SPAN><SPAN style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white">产生编辑<SPAN lang=EN-US>UI的方式，缺省是Dialog方式</SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; mso-font-kerning: 0pt">。可以重载这个方法，指定其它的模式。</SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #e0e0e0; MARGIN: 1pt 0cm 1pt 21pt; TEXT-INDENT: 0cm; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN style="FONT-SIZE: 10pt; mso-font-kerning: 0pt">示例：<SPAN lang=EN-US><BR>protected String getEditUIModal()<BR>{<o:p></o:p></SPAN></SPAN></P>
<P class=MsoNormalIndent style="BACKGROUND: #e0e0e0; MARGIN: 1pt 0cm 1pt 21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm"><SPAN lang=EN-US style="FONT-SIZE: 10pt; mso-font-kerning: 0pt">return UIFactoryName.EDITWIN;<BR>}</SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l1 level1 lfo4; tab-stops: list 42.0pt"><SPAN lang=EN-US>3.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; COLOR: #7f0055; mso-font-kerning: 0pt; mso-highlight: white">protected</SPAN></B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white"> <B><SPAN style="COLOR: #7f0055">boolean</SPAN></B> <SPAN style="COLOR: black">initDefaultFilter()</SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; mso-font-kerning: 0pt">：设置默认过滤条件。该方法被<SPAN lang=EN-US>onLoad调用。</SPAN></SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l1 level1 lfo4; tab-stops: list 42.0pt"><SPAN lang=EN-US>4.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; COLOR: #7f0055; mso-font-kerning: 0pt; mso-highlight: white">protected</SPAN></B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white"> <B><SPAN style="COLOR: #7f0055">void</SPAN></B> <SPAN style="COLOR: black">refresh(ActionEvent</SPAN> <SPAN style="COLOR: black">e)</SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; mso-font-kerning: 0pt">：界面刷新方法。通过传递的参数<SPAN lang=EN-US>e可以知道触发事件源。在ListUI的缺省实现中，refresh是靠调用execQuery把数据重新获取一遍来达到刷新的效果的。派生类可以依据实际情况来定义更合理的刷新策略。</SPAN></SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l1 level1 lfo4; tab-stops: list 42.0pt"><SPAN lang=EN-US>5.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN><B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; COLOR: #7f0055; mso-font-kerning: 0pt; mso-highlight: white">protected</SPAN></B><SPAN lang=EN-US style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white"> <SPAN style="COLOR: black">String</SPAN> <SPAN style="COLOR: black">getKeyFieldName()</SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: black; mso-font-kerning: 0pt">：</SPAN><SPAN style="FONT-SIZE: 10pt; BACKGROUND: white; mso-font-kerning: 0pt; mso-highlight: white">获取<SPAN lang=EN-US>KDTable中的主键列名称，供编辑/删除时获取主键用。默认值为"id"。<BR><SPAN style="COLOR: blue">注意：BOS自动生成KDTable的列时，使用的是query对象名.id的形式，与超类中约定并不一致。要么在设计期将列名修改，要么在重载</SPAN></SPAN></SPAN><SPAN style="FONT-SIZE: 10pt; COLOR: blue; mso-font-kerning: 0pt">该方法返回正确的列名。</SPAN></P>
<H4 style="MARGIN: 14pt 0cm 14.5pt"><SPAN style="FONT-FAMILY: 黑体; mso-ascii-font-family: Arial">常见问题</SPAN></H4>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l0 level1 lfo5; tab-stops: list 42.0pt"><SPAN lang=EN-US>1.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>问：序时簿界面打开时会自动查询并显示所有的数据，我想加入一个过滤条件应该怎么做？<SPAN lang=EN-US><BR>答：重载initDefaultFilter方法，为mainQuery对象（类型是EntityViewInfo）增加过滤条件（filterItem）。也可弹出一个对话框（例如通用查询对话框），让用户指定过滤条件。</SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l0 level1 lfo5; tab-stops: list 42.0pt"><SPAN lang=EN-US>2.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>问：我增加了一个按钮，想在执行完毕的时候刷新一下列表，该怎么做？<SPAN lang=EN-US><BR>答：在actionPerformed方法最后一行加调用exceQuery()的代码即可。</SPAN></P>
<P class=MsoNormalIndent style="MARGIN: 1pt 0cm 1pt 42pt; TEXT-INDENT: -21pt; mso-char-indent-count: 0; mso-char-indent-size: 0cm; mso-list: l0 level1 lfo5; tab-stops: list 42.0pt"><SPAN lang=EN-US>3.<SPAN style="FONT: 7pt 'Times New Roman'">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </SPAN></SPAN>问：我增加了一个按钮，想在执行前先检查列表是否有选中的行，该怎么做？<SPAN lang=EN-US><BR>答：在actionPerformed方法第一行加调用checkSelected()的代码即可。该方法在检查到没有选中的行时，会弹出对话框提示用户，并且不再继续执行actionPerformed方法中后面的代码。</SPAN></P>
<P class=MsoNormal style="MARGIN: 0cm 0cm 0pt"><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">问：如何得到选中行的主键值？</SPAN><SPAN lang=EN-US><BR></SPAN><SPAN style="FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'">答：使用</SPAN><SPAN lang=EN-US style="BACKGROUND: white; COLOR: black; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt; mso-highlight: white"><FONT face="Times New Roman">getSelectedKeyValue</FONT></SPAN><SPAN style="COLOR: black; FONT-FAMILY: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 10.0pt; mso-font-kerning: 0pt">方法即可</SPAN></P>

</BODY>
</HTML>
